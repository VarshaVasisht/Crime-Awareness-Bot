(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{107:function(e,t,a){},133:function(e,t,a){e.exports=a(172)},138:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(33),r=a.n(s),i=(a(138),a(107),a(182)),c=a(183),o=a(31);class m extends l.Component{render(){const{user:e}=this.props;return n.a.createElement(i.a,{bg:"dark",variant:"success"},n.a.createElement(o.b,{to:"",className:"navbar-brand"},n.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMTI3Ljk4IDIwMTYuODciIGZpbGw9IiM0MWUwZmQiPgogIDxwYXRoICBkPSJNODg4IDExMTkuMTdjMTYtMzIuNjIgMzIuODQtNjUuMzcgNTAuMTctOTcuMzVsLjE1LS4yNyAxOC4zOS0zNS42OCAyNy4xNi00NSAuMTctLjI5YzEwLjE0LTE3LjI2IDIwLjY2LTM0LjY4IDMxLjI3LTUxLjc4bDE4LjY5LTMwLjg3YzI0Ljg4LTQxLjE5IDQ0Ljg4LTcxLjIzIDc2LjQzLTExNC43NiAxNy0yMy40MyAzMy4xMi00NCA1OC42Ni03NS45MmwuMDYtLjA2IDEuMjYtMS41OS40OS0uNjNjMTAuMzctMTMuMjIgMjAuODQtMjYuMjUgMzEuMTEtMzguNzNsLjM0LS40Mi4yLS4yNWMyMy44My0yOS41MSA0OC4xMi01OS4xMyA3Mi4xOS04OGw5LjU3LTExLjQ4VjM1Ni41NEgxMjY3Yy05LjIzLTguNjgtMTguNjYtMTcuMy0yOC4wOC0yNS42OS03Ni4zMi02Ny43Mi0xNTIuNDMtMTIwLjg1LTIyNi4yNy0xNTcuNzktNzUuNzEtMzcuOTItMTQ1LjYzLTU3LjE0LTIwNy44LTU3LjE0LTQ0LjM5IDAtODQuMDYgOS45NC0xMTcuOTEgMjkuNTMtMzIuNTUgMTguODQtNTkuOSA0Ni45MS04MS4zMSA4My40NC0yMC4wNiAzNC4yMy0zNC44NCA3NS44OS00My45NSAxMjMuODEtMTcuNTQgOTIuMzctMTMuNzQgMjA4IDExIDMzNC4zNCAzLjEyIDE1LjkgNi41NiAzMiAxMC4yNSA0OC0xOS43NCA2LTM4LjkxIDEyLjE4LTU3LjEzIDE4LjUzLTExOS4yNiA0MS41OC0yMTkgOTUuOTEtMjg4LjQyIDE1Ny4xNC0zNiAzMS43MS02My44NCA2NS4yMy04Mi44OSA5OS42Mi0yMC4yNCAzNi41Ny0zMC41MSA3NC4wOC0zMC41MSAxMTEuNDkgMCA3NSA0MS41NSAxNTEgMTIwLjE1IDIxOS45NCA3NCA2NC45MyAxNzguNjUgMTIxLjYyIDMwMi41NSAxNjQgMTEuNTEgMy45MSAyMy4yMiA3LjcxIDM1IDExLjM0LTQuMTIgMTcuOTMtNy45MyAzNi0xMS4zNiA1NC0yMy41NiAxMjQuMDgtMjYuMzEgMjM3LjYyLTggMzI4LjM1IDkuNTEgNDcgMjQuNjEgODcuODkgNDQuODkgMTIxLjU3IDIxLjU2IDM1LjggNDguOTMgNjMuNDQgODEuMzQgODIuMTMgMzQuMTUgMTkuNjkgNzQuMzQgMjkuNjcgMTE5LjQ1IDI5LjY3IDYxLjQyIDAgMTMwLjA5LTE4LjIxIDIwNC4xMS01NC4xMyA3Mi41Ni0zNS4yMSAxNDYuNjMtODUuNjQgMjIwLjEzLTE0OS44OSAxMS4zMy05LjkgMjMtMjAuNDkgMzQuNjYtMzEuNTNoMTcuNDF2LTE3NC4zOWwtNi4zNC03LjgtMy0zLjY3LTc5LjgyLTk4LjU1LTQ0LjM1LTU0Ljc1Yy0yMi4zOS0yNy42NC01OC4yNS03OC43OS0xMDEtMTQ0LTM0LTUxLjg0LTU4Ljc2LTkzLjQ3LTcwLjUtMTEzLjYzbC0xLjI4LTIuMjFjLTIwLjQ5LTM1LjMzLTM1LjcxLTYzLjc5LTQ3LjkzLTg2LjY0LTE1LjMtMjguNjMtMzAuMzktNTcuODctNDQuOTEtODdsMi42Ni01LjE3em0tODAuODYtMTcyLjg5Yy0xMy41My0zNC43LTI1LjkyLTY5LjEzLTM3LTEwMi44MSAzNC41Ny03LjEzIDcwLjUxLTEzLjUzIDEwNy4zMi0xOS4xMS0xMi4yOCAyMC4xMS0yNC4zNCA0MC40MS0zNiA2MC42NHMtMjMuMTIgNDAuNjktMzQuMzIgNjEuMjh6bS0zOC4yNSA0NjIuMWMxMS40NS0zNC44NiAyNC4zMS03MC41NiAzOC4zOS0xMDYuNTkgMTEuMjkgMjAuNyAyMi44NyA0MS4zIDM0LjU4IDYxLjUzIDEyLjI3IDIxLjE5IDI1IDQyLjQ4IDM3Ljk1IDYzLjU4LTM4LjQ2LTUuMzItNzUuNjItMTEuNTMtMTEwLjkyLTE4LjUxek03MDcuMTggMzk3LjE2YzktNjEuNzQgMjkuMTQtMTA1Ljg3IDU1LjM3LTEyMS4wNiAxMC44OS02LjMxIDI1LjM0LTkuNSA0Mi45My05LjUgMzguNDcgMCA4OC4yNCAxNS4xIDE0My45MSA0My42NyA2MC4zNCAzMSAxMjUuNzcgNzcuMTEgMTg5LjIyIDEzMy40NXE1LjkgNS4yNCAxMi4wNyAxMC44OWMtNTUuODEgNjEuNzEtMTEwLjgxIDEzMC4yOC0xNjMuNjggMjA0LjEtOTAuMDggOC44LTE3Ni42OCAyMS45NC0yNTcuNzYgMzkuMTEtMi45My0xMi44NC01LjY4LTI1Ljc1LTguMi0zOC41bC0uMjQtMS4zMmMtMTkuMzMtOTguNzYtMjQuMDQtMTg5LTEzLjYyLTI2MC44NHptMTEuMzEgNzI3Yy0zOC4xIDg0LTcwLjQ4IDE2Ny4xNi05Ni4zNyAyNDcuNDYtOS0yLjgtMTcuODktNS43Mi0yNi42NS04LjctMTAzLTM1LjIxLTE4OC43OS04MC42Ni0yNDguMDgtMTMxLjQzLTQ1LjM3LTM4Ljg1LTcyLjQ1LTc5LjgzLTcyLjQ1LTEwOS42MyAwLTMwLjU5IDI3LjA5LTcwIDc0LjM0LTEwOC4yIDU1LTQ0LjQ3IDEzMy4yNy04NS4xMSAyMjYuMTktMTE3LjUgMTUuNzktNS40OCAzMS44Ny0xMC43MyA0OC0xNS42NCAyNS41MyA3OS4xMyA1Ny40OCAxNjAuOTkgOTUuMDEgMjQzLjYzem0uMTIgNDc0LjkyYzIuODYtMTUgNi0zMC4wOSA5LjQzLTQ1LjA5IDgwIDE2LjM3IDE2Ny41OSAyOC43MSAyNjAuNzUgMzYuNzEgNTMuMzggNzQuMzQgMTA4Ljg0IDE0My4zNyAxNjUuMDUgMjA1LjQ0LTYuOTQgNi4zOS0xMy45NCAxMi42OC0yMC45IDE4Ljc5LTgxLjM3IDcxLjEzLTE2My4wOSAxMjIuNTUtMjM2LjI4IDE0OC43MWwtMS41Mi41NGMtMzIuOCAxMS41OC02Mi4wOSAxNy40NS04NyAxNy40NS0xOC4zOCAwLTMzLjIyLTMuMTgtNDQuMTEtOS40Ni0yNi41MS0xNS4yOS00Ny4xNC01OC40Ni01Ni42LTExOC40NS0xMS4wNi02OS45MS03LjE5LTE1Ny45NyAxMS4xNy0yNTQuNjV6IgogICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMy45OCAtMTE1LjkyKSIgaWQ9Il9Hcm91cF8iIGRhdGEtbmFtZT0iJmx0O0dyb3VwJmd0OyIgLz4KICA8cGF0aCBkPSJNMjE5NS4wNyAxMjA1LjFxLTU2LjI2LTEwMy40NS0xNjUuNTQtMTM0LjIzYTIuODUgMi44NSAwIDAgMS0xLjc5LTIuODUgMyAzIDAgMCAxIDEuMzctMi42OGM1NC4yNC0zMC4xNiA5NS45My03My4xMSAxMjUuMTUtMTI3LjlxNDQuMTUtODIuODkgNDQuMTYtMTk5LjQ5YzAtMTI4LjI1LTMyLjQ1LTIyMy42NS05Ny4wNi0yODcuMTFzLTE1MC42Mi05NS0yNTcuNy05NWgtNTc4LjM1Yy0xLjI1IDAtMi4yNyAxLjMxLTIuMjcgMi45M1YxODk0LjNjMCAxLjYyIDEgMi45MyAyLjI3IDIuOTNoNTQ2LjU3cTExNS40MiAwIDE5OS4xMS0zMy42OWM1NS45MS0yMi40MiAxMDEuNC01Mi42OCAxMzcuMjEtOTAuNjhzNjEuOTItODMuMzMgNzguNjYtMTM2YzE2Ljc0LTUyLjIzIDI1LjEtMTA4LjggMjUuMS0xNjkuMjQuMDQtMTA1LjM3LTE5LjA4LTE5Mi41Ny01Ni44OS0yNjIuNTJ6bS03MjIuMzItNjI4YzAtMS42MiAxLTIuOTMgMi4yNy0yLjkzaDMzOS40NmM1Ni45NSAwIDEwMC41MSAxNiAxMzAuNjUgNDcuNTVzNDUuMiA4Ni40IDQ1LjIgMTY0LjE4YzAgNjkuMTgtMTYuNzQgMTIxLjkyLTUwLjI1IDE1OS4wOHMtNzUuMzcgNTUuMzItMTI1LjYzIDU1LjMySDE0NzVjLTEuMjUgMC0yLjI3LTEuMzEtMi4yNy0yLjkzem01MTguMTYgMTAzNS44Yy0zNC44NiA0Mi43Ni04NC40MSA2NC0xNDguMDcgNjRIMTQ3NWMtMS4yNSAwLTIuMjctMS4zMS0yLjI3LTIuOTN2LTQ3Ni40YzAtMS42MiAxLTIuOTMgMi4yNy0yLjkzaDM2Ny44MmM2My42NiAwIDExMi41NyAxOS44OSAxNDguMDcgNjEuMzVzNTIuOTMgOTkuODIgNTIuOTMgMTc2LjNjLjAyIDc3Ljc3LTE3Ljc2IDEzOC4yNy01Mi45MSAxODAuNjF6IgogICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEyMy45OCAtMTE1LjkyKSIgLz48L3N2Zz4K",width:"25",height:"25",alt:"brand"})),n.a.createElement(c.a,{className:"mr-auto"},n.a.createElement(o.b,{to:"/",className:"nav-link"},"Home"),n.a.createElement(o.b,{to:"/status",className:"nav-link"},"Status"),n.a.createElement(o.b,{to:"/api",className:"nav-link"},"API"),e?n.a.createElement(o.b,{to:"/dashboard",className:"nav-link"},"Dashboard"):n.a.createElement("div",null),n.a.createElement(o.b,{to:"/stats",className:"nav-link"},"Statistics"),n.a.createElement(o.b,{to:"/sos",className:"nav-link"},"SOS")))}}var u=a(7),d=(a(144),a(8)),h=a.n(d),g=a(6),M=a(54);var p="http://localhost:8000",E=a(17),N=a(175),y=a(180),b=a(176);const T=[{label:"Chat With Me ?",value:"1"},{label:"Register Compliant",value:"2"},{label:"Check Status",value:"status"},{label:"SOS",value:"sos"}];class L extends l.Component{constructor(){super(),this.initialValues={name:"",mobile:"",description:""},this.handleClose=()=>this.setState({show:!1}),this.handleShow=()=>this.setState({show:!0}),this.componentDidMount=()=>{var e=this;navigator.geolocation.getCurrentPosition((function(t){e.state.data.lat=t.coords.latitude+"",e.state.data.lon=t.coords.longitude+""})),navigator.geolocation&&navigator.geolocation.watchPosition((function(e){console.log("Latitude is :",e.coords.latitude),console.log("Longitude is :",e.coords.longitude)})),Object(g.addResponseMessage)("Hi there, I am Jagrukta : ) I can help you register a compliant or make you aware about crimes..."),Object(g.addResponseMessage)("Here are few quick links to help you.."),Object(g.addLinkSnippet)({title:"Crime In India",link:"https://ncrb.gov.in/en/crime-india",target:"_blank"}),Object(g.addLinkSnippet)({title:"Crime Prevention",link:"https://publicsafety.columbia.edu/content/crime-prevention-tips",target:"_blank"}),Object(g.setQuickButtons)(T),Object(g.toggleInputDisabled)()},this.handleSubmit=(e,t)=>{const a={name:e.name,mobile:e.mobile,description:e.description,lat:this.state.data.lat,lon:this.state.data.lon};h.a.post(p+"/police/add-sos/",a).then(e=>{if(null!=e.data){e.data;window.location="/sos",u.b.success("Emergency received. Please be online..")}}).catch(e=>{console.log(e)})},this.validationSchema=M.a({mobile:M.b().required("Mobile is required"),description:M.b().required("please describe the issue..")}),this.handleQuickButtonClicked=e=>{if(Object(g.toggleInputDisabled)(),Object(g.setQuickButtons)([]),1==e)Object(g.addResponseMessage)("So.. How can I help you ?");else if(2==e){Object(g.addUserMessage)("Register Compliant"),Object(g.addResponseMessage)("Sure, follow along.."),Object(g.addResponseMessage)("please input your Aadhaar Number");this.setState({flag:1})}else if("new"==e)Object(g.dropMessages)(),Object(g.toggleWidget)();else if("status"==e){Object(g.addUserMessage)("Check Status");Object(g.addLinkSnippet)({title:"Check Status Here..",link:"http://localhost:3000/status/",target:"_blank"}),Object(g.addResponseMessage)("Any more Queries ?")}else"sos"==e?(Object(g.addUserMessage)("SOS"),Object(g.addResponseMessage)("Your location is being shared with police. Please be online..."),Object(g.addLinkSnippet)({title:"Visit here",link:"http://localhost:3000/sos",target:"_blank"}),this.handleShow()):(this.state.data.category=e.toString(),Object(g.addResponseMessage)("Please describe the incident"))},this.sendCompliant=()=>{const e=this.state.data;var t={method:"post",url:p+"/police/add-compliant/",data:e};console.log(e),h()(t).then(e=>{200===e.status&&(console.log(e),u.b.success("Compliant Registered"))}).catch(e=>{u.b.error("Please provide valid input..")})},this.handleNewUserMessage=e=>{if(1===(s=this.state.flag)){var t=Object.keys(this.state.data)[this.state.idx-1];"category"===t?(this.state.data.description=e,this.state.idx+=1):this.state.data[t]=e;var a=Object.keys(this.state.data)[this.state.idx];if(this.state.idx+=1,Object(g.addResponseMessage)(this.state.data[a]),"category"===a){const e=[{label:"Cognizable",value:"Cognizable"},{label:"Non Cognizable",value:"Non Cognizable"},{label:"Missing Case",value:"Missing Report"},{label:"Theft",value:"Theft Report"}];Object(g.setQuickButtons)(e),Object(g.toggleInputDisabled)()}else if("url"===a){var l="https://drive.google.com/";Object(g.addLinkSnippet)({title:"Incident Pictures",link:l,target:"_blank"}),this.state.data.url=l;var n=this.state.data.uid+"@"+this.state.data.mobile;this.sendCompliant(),Object(g.addResponseMessage)("Thanks for the details, our Officer will get back to you once he is online"),Object(g.addResponseMessage)("You can check status using the compliant ID : "+n),Object(g.toggleInputDisabled)();const e=[{label:"New Chat",value:"new"}];Object(g.setQuickButtons)(e);var s=-1;this.setState({flag:s}),this.state.idx=1}}else{Object(g.toggleMsgLoader)();const t={message:e};h.a.post(p+"/bot/",t).then(e=>{if(null!=e.data){var t=e.data;Object(g.addResponseMessage)(t.response),Object(g.toggleMsgLoader)()}}).catch(e=>{console.log(e)})}},this.state={data:{uid:"Please input your Aadhar Number.",name:"Please mention your full name as mentioned in Aadhaar Card",mobile:"What's your Mobile Number ?",email:"Enter your email address..",district:"In which district do you live currently ?",place:"Where did the Incident took place ?",category:"Please choose the Incident type from below..",description:"",url:"In case you got any incident pictures that can help, please upload it here"},show:!1,idx:1,flag:-1}}render(){const{show:e}=this.state;return n.a.createElement(N.a,null,n.a.createElement("div",{className:"App"},n.a.createElement(g.Widget,{handleNewUserMessage:this.handleNewUserMessage,title:"AskNow",subtitle:"Crime Awareness & Registration Portal",autoFocus:"true",showTimeStamp:"true",handleQuickButtonClicked:this.handleQuickButtonClicked})),n.a.createElement(y.a,{show:e,onHide:this.handleClose,backdrop:"static",keyboard:!1},n.a.createElement(y.a.Header,{closeButton:!0},n.a.createElement(y.a.Title,null,"Emergency Information")),n.a.createElement(y.a.Body,null,n.a.createElement(E.d,{initialValues:this.initialValues,validationSchema:this.validationSchema,onSubmit:this.handleSubmit},e=>n.a.createElement(E.c,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("label",{htmlFor:"name"},"Full Name"),n.a.createElement(E.b,{type:"text",id:"name",name:"name",className:"form-control"}),n.a.createElement("div",{className:"error"},n.a.createElement(E.a,{name:"name"})))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("label",{htmlFor:"mobile"},"Mobile"),n.a.createElement(E.b,{type:"text",id:"mobile",name:"mobile",autoComplete:"on",className:"form-control"}),n.a.createElement("div",{className:"error"},n.a.createElement(E.a,{name:"mobile"})))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("label",{htmlFor:"mobile"},"What's your Emergency ?"),n.a.createElement(E.b,{type:"text",id:"description",name:"description",autoComplete:"on",className:"form-control"}),n.a.createElement("div",{className:"error"},n.a.createElement(E.a,{name:"description"})))),n.a.createElement(y.a.Footer,null,n.a.createElement(b.a,{variant:"success",type:"submit",disabled:!e.isValid||e.isSubmitting},"Submit\xa0"),"\xa0\xa0\xa0",n.a.createElement(b.a,{variant:"danger",type:"reset"},"Reset\xa0")))))))}}var j=L,S=a(177),x=a(184),C=a(181);class v extends l.Component{constructor(...e){super(...e),this.state={posts:[]},this.title=n.a.createRef(),this.description=n.a.createRef(),this.handleAdd=()=>{const{user:e}=this.props;if(e&&e.uid){const e={title:this.title.value,description:this.description.value};var t={method:"post",url:p+"/police/add-post/",data:e};h()(t).then(e=>{if(null!=e.data){this.state.posts;this.componentDidMount(),u.b.success("Successfully created a new Post")}}).catch(e=>{u.b.error("An unexpected error Occurred.")}),this.title.value="",this.description.value=""}},this.handleDelete=e=>{const{user:t}=this.props;if(t&&t.uid){const t=this.state.posts,l=this.state.posts.filter(t=>t.id!==e.id);this.setState({posts:l});const n={id:e.id};console.log(n);var a={method:"post",url:p+"/police/delete-post/",data:n};h()(a).then(e=>{200===e.status&&u.b.success("Successfully Deleted")}).catch(e=>{u.b.error("An unexpected error Occurred."),this.setState({posts:t})})}}}componentDidMount(){var e={method:"get",url:p+"/police/get-posts/",data:""};h()(e).then(e=>{null!=e.data&&this.setState({posts:e.data})}).catch(e=>{u.b.error("An unexpected error Occurred")})}render(){const{posts:e}=this.state,{user:t}=this.props;return 0!==e.length||t?n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),t?n.a.createElement("h4",{className:"text-primary text-center"},"Your Announcements"):n.a.createElement("h4",{className:"text-primary text-center"},"Latest Announcements"),n.a.createElement("br",null),n.a.createElement("div",{className:"col table-responsive-md"},n.a.createElement("table",{className:"table table-dark  text-white table-striped"},n.a.createElement("tbody",null,e.reverse().slice(0,4).map(e=>n.a.createElement("tr",{key:e.id+"@"+e.title},n.a.createElement("td",{className:"bg-dark text-white"},n.a.createElement("strong",null," ",n.a.createElement("p",{className:"text-warning"},e.title)),n.a.createElement("p",null,e.description),t&&n.a.createElement("div",{className:"float-right"},"\xa0\xa0\xa0\xa0",n.a.createElement(b.a,{variant:"danger",onClick:()=>this.handleDelete(e),className:"btn-sm"},"Delete")))))))),n.a.createElement("br",null),t&&n.a.createElement("div",{className:"col-md-8"},n.a.createElement(x.a,{className:"border border-dark bg-dark text-white"},n.a.createElement(x.a.Body,null,n.a.createElement(x.a.Title,{className:"text-white"},"New Announcement",n.a.createElement(b.a,{variant:"success",onClick:this.handleAdd,className:"float-right"},"Post")),n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(C.a.Control,{className:"bg-dark text-white",ref:e=>this.title=e,placeholder:"Title"}),n.a.createElement("br",null),n.a.createElement(C.a.Control,{as:"textarea",className:"bg-dark text-white",ref:e=>this.description=e,placeholder:"Description"}))))),n.a.createElement("br",null),n.a.createElement("br",null)):n.a.createElement("p",{className:"text-secondary"},"No Announcements yet..")}}var I=v;class w extends l.Component{constructor(...e){super(...e),this.onClick=()=>this.props.history.push("/login"),this.handleLogout=()=>{localStorage.clear(),window.location="/",u.b.success("Logout Successful")}}render(){const{user:e}=this.props;return n.a.createElement("div",null,n.a.createElement(S.a,{className:"bg-dark text-white"},n.a.createElement("h2",null,"Welcome to Crime Awareness Portal"),n.a.createElement("p",null,"This portal allows a user to get awarness about different crimes happening around the world and also can register complaint through the chatbot."),n.a.createElement("div",null,e?n.a.createElement("div",null,n.a.createElement("p",null,"Logged In as :"," ",n.a.createElement("span",{className:"text-success"},e.uid)),n.a.createElement("p",null,"Email ID : "," ",n.a.createElement("span",{className:"text-success"},e.email.toLowerCase())),n.a.createElement(b.a,{variant:"danger",className:"btn-sm",onClick:this.handleLogout},"Log Out"),"\xa0\xa0\xa0"):n.a.createElement(b.a,{variant:"secondary",onClick:this.onClick},"Login"))),n.a.createElement(I,{user:e}))}}l.Component;l.Component;l.Component;a(10);l.Component;var z=a(178),D=a(128),O=a(11),k=a(28),A=a(29);class f extends l.Component{constructor(...e){super(...e),this.initialValues={uid:"",password:""},this.onSubmit=(e,t)=>{const a={uid:e.uid,password:e.password};h.a.post(p+"/police/login/",a).then(e=>{null!=e.data&&(localStorage.setItem("uid",e.data.uid),localStorage.setItem("email",e.data.email),t.setSubmitting(!1),t.resetForm(),window.location="/",u.b.success("Login Successful"))}).catch(e=>{console.log(e),u.b.error("Invalid Credentials"),t.setSubmitting(!1),t.resetForm()})},this.validationSchema=M.a({uid:M.b().required("UID is Required"),password:M.b().required("No Password provided.")})}render(){return n.a.createElement(x.a,{style:{},className:"border border-dark bg-dark text-white mx-auto",style:{width:"58%",background:"#272b30"}},n.a.createElement(x.a.Header,{className:"text-center"},n.a.createElement("h3",null,"Login To Admin Console")),n.a.createElement(E.d,{initialValues:this.initialValues,validationSchema:this.validationSchema,onSubmit:this.onSubmit},e=>n.a.createElement(E.c,null,n.a.createElement(x.a.Body,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("label",{htmlFor:"uid"},"UID"),n.a.createElement(E.b,{type:"text",id:"uid",name:"uid",className:"bg-dark text-white form-control"}),n.a.createElement("div",{className:"error"},n.a.createElement(E.a,{name:"uid"})))),n.a.createElement("br",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement(E.b,{type:"password",id:"password",name:"password",autoComplete:"on",className:"bg-dark text-white form-control"}),n.a.createElement("div",{className:"error"},n.a.createElement(E.a,{name:"password"}))))),n.a.createElement(x.a.Footer,null,n.a.createElement(b.a,{variant:"success",type:"submit",disabled:!e.isValid||e.isSubmitting},"Login\xa0",n.a.createElement(k.a,{icon:A.c})),"\xa0\xa0\xa0",n.a.createElement(b.a,{variant:"danger",type:"reset"},"Reset\xa0",n.a.createElement(k.a,{icon:A.g}))))))}}var Q=f,Y=a(185);var U=({types:e,selectedType:t,onTypeSelect:a})=>n.a.createElement(Y.a,{className:"border border-dark bg-dark"},e.map(e=>n.a.createElement(Y.a.Item,{onClick:()=>a(e),key:e._id,className:e===t?"active":"bg-dark text-white"},e.name))),P=a(41),R=a.n(P),_=a(186);var F=({totalCount:e,pageSize:t,currentPage:a,onPageChange:l})=>{const s=Math.ceil(e/t);if(1===s)return null;const r=R.a.range(1,s+1);return n.a.createElement(_.a,{size:"sm"},r.map(e=>n.a.createElement(_.a.Item,{onClick:()=>l(e),key:e,className:e===a?"active":"bg-dark text-white"},e)))};const H=[{_id:"1",name:"Cognizable"},{_id:"2",name:"Non Cognizable"},{_id:"3",name:"Missing Report"},{_id:"4",name:"Theft Report"}];function B(){return H.filter(e=>e)}class W extends l.Component{constructor(...e){super(...e),this.raiseSort=e=>{const t={...this.props.sortColumn};t.path===e?t.order="asc"===t.order?"desc":"asc":(t.path=e,t.order="asc"),this.props.onSort(t)},this.renderSortIcon=e=>{const{sortColumn:t}=this.props;return e.path!==t.path?null:"asc"===t.order?n.a.createElement(k.a,{icon:A.d}):n.a.createElement(k.a,{icon:A.e})}}render(){return n.a.createElement("thead",null,n.a.createElement("tr",null,this.props.columns.map(e=>n.a.createElement("th",{className:"clickable",key:e.path||e.key,onClick:()=>this.raiseSort(e.path)},e.label," ",this.renderSortIcon(e)))))}}var V=W;class G extends l.Component{constructor(...e){super(...e),this.renderCell=(e,t)=>{if(t.content)return t.content(e);if("date_created"===t.path){let a=R.a.get(e,t.path);a=new Date(1e3*a).toString();let l=a.indexOf("GMT");return a.substring(0,l)}return R.a.get(e,t.path)},this.createKey=(e,t)=>e.date_created+(t.path||t.key)}render(){const{data:e,columns:t}=this.props;return n.a.createElement("tbody",null,e.map(e=>n.a.createElement("tr",{key:e.uid},t.map(t=>n.a.createElement("td",{key:this.createKey(e,t)},this.renderCell(e,t))))))}}var J=G;var Z=({columns:e,sortColumn:t,onSort:a,data:l})=>n.a.createElement("div",{className:"table-responsive-md"},n.a.createElement("table",{className:"table table-dark  text-white table-striped table-borderless"},n.a.createElement(V,{columns:e,sortColumn:t,onSort:a}),n.a.createElement(J,{columns:e,data:l})));class q extends l.Component{constructor(...e){super(...e),this.columns=[{path:"uid",label:"Aadhaar No.",content:e=>n.a.createElement(o.b,{to:{pathname:"/dashboard/".concat(e.id),state:{permission:e}},permission:e},e.uid)},{path:"name",label:"Name"},{path:"mobile",label:"Mobile"},{path:"status",label:"Status"},{path:"district",label:"District"},{path:"place",label:"Incident Place"},{key:"Delete",content:e=>n.a.createElement("div",null,n.a.createElement(k.a,{style:{cursor:"pointer"},className:"text-danger",icon:A.f,title:"trash",onClick:()=>this.props.onDelete(e)}),n.a.createElement("br",null),n.a.createElement("br",null),"accepted"===e.status?n.a.createElement("span",{className:"text-success text-center",title:"accepted"},n.a.createElement(k.a,{icon:A.a})):null)}]}render(){const{permissions:e,onSort:t,sortColumn:a}=this.props;return n.a.createElement(Z,{columns:this.columns,data:e,sortColumn:a,onSort:t})}}var K=q;var X=({value:e,onChange:t})=>n.a.createElement("input",{type:"text",name:"query",className:"form-control my-3",placeholder:"Search by UID starting with...",value:e,onChange:e=>t(e.currentTarget.value)});class $ extends l.Component{constructor(...e){super(...e),this.state={permissions:[],types:[],currentPage:1,pageSize:3,searchQuery:"",sortColumn:{path:"date_created",order:"desc"}},this.handleTypeSelect=e=>{this.setState({selectedType:e,searchQuery:"",currentPage:1})},this.handlePageChange=e=>{this.setState({currentPage:e})},this.handleDelete=e=>{const t=this.state.permissions.filter(t=>t.date_created!==e.date_created);this.setState({permissions:t})},this.handleSort=e=>{this.setState({sortColumn:e})},this.handleSearch=e=>{this.setState({searchQuery:e,selectedType:null,currentPage:1})},this.getPagedData=()=>{const{pageSize:e,currentPage:t,sortColumn:a,selectedType:l,searchQuery:n,permissions:s}=this.state;let r=s;n?r=s.filter(e=>e.uid.toLowerCase().startsWith(n.toLowerCase())):l&&l._id&&(r=s.filter(e=>e.category===l.name));const i=function(e,t,a){const l=(t-1)*a;return R()(e).slice(l).take(a).value()}(R.a.orderBy(r,[a.path],[a.order]),t,e);return{totalCount:r.length,data:i}}}componentDidMount(){if(null!=localStorage.getItem("uid")){var e={method:"get",url:p+"/police/get-compliants/",data:""};h()(e).then(e=>{if(null!=e.data){const t=[{_id:"",name:"All Compliants"},...B()];this.setState({permissions:e.data,types:t})}}).catch(e=>{u.b.error("Something went wrong !!")})}else{const e=[{_id:"",name:"All Compliants"},...B()];this.setState({permissions:[],types:e})}}render(){const{length:e}=this.state.permissions,{pageSize:t,currentPage:a,sortColumn:l,searchQuery:s}=this.state,{totalCount:r,data:i}=this.getPagedData();return 0===e?n.a.createElement("p",{className:"text-secondary"},"Loading Permissions from database..."):n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md"},n.a.createElement(U,{types:this.state.types,selectedType:this.state.selectedType,onTypeSelect:this.handleTypeSelect})),n.a.createElement("div",{className:"col-md-9"},n.a.createElement("p",{className:"text-white"},"Showing all ",r," Permissions in the Database."),n.a.createElement(X,{value:s,onChange:this.handleSearch}),n.a.createElement(K,{permissions:i,sortColumn:l,onDelete:this.handleDelete,onSort:this.handleSort}),n.a.createElement(F,{totalCount:r,pageSize:t,currentPage:a,onPageChange:this.handlePageChange}),n.a.createElement("br",null),n.a.createElement("br",null)))}}var ee=e=>{const t=(t,a)=>{var l=e.location.state;l.permission.status=a;var n={method:"post",url:p+"/police/compliant/"+t+"/",data:l.permission};h()(n).then(e=>{null!=e.data&&u.b.success("Status Updated for this Compliant")}).catch(e=>{console.log(e),u.b.error("An unexpected error Occured")})},{permission:a}=e.location.state?e.location.state:null;return a?n.a.createElement("div",null,n.a.createElement(x.a,{className:"border border-dark bg-dark text-white"},n.a.createElement(x.a.Header,null,n.a.createElement("h3",{className:"text-primary"},"Details for ",a.name)),n.a.createElement(x.a.Body,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Applicant Full Name:"),n.a.createElement(x.a.Text,null,a.name)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Applicant Aadhaar.No:"),n.a.createElement(x.a.Text,null,a.uid))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Mobile.No:"),n.a.createElement(x.a.Text,null,a.mobile)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Email ID:"),n.a.createElement(x.a.Text,null,a.email))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"District:"),n.a.createElement(x.a.Text,null,a.district)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Place Of Incident:"),n.a.createElement(x.a.Text,null,a.place))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Date Created:"),n.a.createElement(x.a.Text,null,a.date_created)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Status Of Compliant:"),n.a.createElement(x.a.Text,null,a.status))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Description:"),n.a.createElement(x.a.Text,null,a.description)))),n.a.createElement(x.a.Footer,{style:{textAlign:"right"}},n.a.createElement(b.a,{variant:"danger",onClick:()=>t(a.id,"Ignored")},"Ignore"),"\xa0\xa0\xa0\xa0",n.a.createElement(b.a,{onClick:()=>t(a.id,"In Touch")},"Get In Touch"),"\xa0\xa0\xa0\xa0",n.a.createElement(b.a,{variant:"success",onClick:()=>t(a.id,"Clear")},"Solved"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null)):null};a(165);class te extends l.Component{constructor(...e){super(...e),this.state={permission:[]},this.permission_id=n.a.createRef(),this.handleSubmit=e=>{e.preventDefault();var t={method:"get",url:p+"/police/get-status/"+this.permission_id.value,data:{}};h()(t).then(e=>{null!=e.data&&this.setState({permission:e.data})}).catch(e=>{Object(u.b)("Sorry, Couldn't find your Compliant"),this.setState({permission:[]})})}}render(){const{permission:e}=this.state;return n.a.createElement("div",{className:"col"},n.a.createElement(C.a,{onSubmit:e=>this.handleSubmit(e)},n.a.createElement("input",{type:"text",autoFocus:!0,className:"form-control my-3",placeholder:"Enter provided permission id..",defaultValue:"",ref:e=>this.permission_id=e})),n.a.createElement("br",null),0===e.length?n.a.createElement("div",null,n.a.createElement("p",{className:"text-danger"},"Please provide Valid Compliant Id"),n.a.createElement("p",{className:"text-primary"},"Compliant id is: Aadhaar@Mobile")):n.a.createElement("div",null,n.a.createElement(x.a,{className:"border border-dark bg-dark text-white"},n.a.createElement(x.a.Header,null,n.a.createElement("h3",{className:"text-primary"},"Details for ",e.name),n.a.createElement("div",null,n.a.createElement("strong",null,"Clear"===e.status?n.a.createElement("div",null,n.a.createElement("p",{className:"text-success"},"Your Compliant was solved")):"Ignored"===e.status?n.a.createElement("p",{className:"text-danger"},"Your Compliant was rejected due to Incorrect / Insufficient details"):"In Touch"===e.status?n.a.createElement("p",{className:"text-info"},"Your Compliant has been seen and assigned to an Officer. Please check your mail for Officer details."):n.a.createElement("p",{className:"text-info"},"Your Compliant is still under validation, Once validated we will get back yo you.")))),n.a.createElement(x.a.Body,null,n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Applicant Full Name:"),n.a.createElement(x.a.Text,null,e.name)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Applicant Aadhaar.No:"),n.a.createElement(x.a.Text,null,e.uid))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Mobile.No:"),n.a.createElement(x.a.Text,null,e.mobile)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Email ID:"),n.a.createElement(x.a.Text,null,e.email))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"District:"),n.a.createElement(x.a.Text,null,e.district)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Place Of Incident:"),n.a.createElement(x.a.Text,null,e.place))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Date Created:"),n.a.createElement(x.a.Text,null,e.date_created)),n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Status Of Compliant:"),n.a.createElement(x.a.Text,null,e.status))),n.a.createElement("hr",null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-6"},n.a.createElement(x.a.Title,null,"Description:"),n.a.createElement(x.a.Text,null,e.description)))),n.a.createElement(x.a.Footer,{style:{textAlign:"right"}},n.a.createElement(b.a,{variant:"primary",onClick:()=>window.print()},"Print"))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null)))}}var ae=a(37),le=a.n(ae),ne=(a(99),a(179)),se=a(129),re=a.n(se);a(166);async function ie(e,t){var a=await async function(e){let t="pulsingDot"+Math.random();return t={width:200,height:200,data:new Uint8Array(16e4),onAdd:function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.context=e.getContext("2d")},render:function(){var t=performance.now()%1e3/1e3,a=70*t+30,l=this.context;return l.clearRect(0,0,this.width,this.height),l.beginPath(),l.arc(this.width/2,this.height/2,a,0,2*Math.PI),l.fillStyle="rgba(255, 200, 200,"+(1-t)+")",l.fill(),l.beginPath(),l.arc(this.width/2,this.height/2,30,0,2*Math.PI),l.fillStyle="rgba(255, 100, 100, 1)",l.strokeStyle="white",l.lineWidth=2+4*(1-t),l.fill(),l.stroke(),this.data=l.getImageData(0,0,this.width,this.height).data,e.triggerRepaint(),!0}},t}(t);t.on("load",(async function(){var l=[],n=e.lat,s=e.lon;l.push(s),l.push(n);var r=await async function(e,t){let a=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+","+e+".json?access_token=Your MapBox TOken");return await a.json()}(n,s),i="<strong>Full Name: </strong>"+e.name+"<br><strong>Mobile: </strong>"+e.mobile+"<br><strong>Time: </strong>"+new Date(e.date_created)+"<br><strong>Place Name: </strong>"+r.features[0].place_name.split(",")+"<br><strong>Description: </strong>"+e.description,c=new le.a.Popup({closeButton:!0,closeOnClick:!0});let o="img"+Date.now();t.addImage(o,a,{pixelRatio:2}),t.addSource(o,{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:l}}]}}),t.addLayer({id:o,type:"symbol",source:o,layout:{"icon-image":o}}),t.on("mouseenter",o,(function(e){t.getCanvas().style.cursor="pointer";for(var a=e.features[0].geometry.coordinates.slice();Math.abs(e.lngLat.lng-a[0])>180;)a[0]+=e.lngLat.lng>a[0]?360:-360;c.setLngLat(l).setHTML(i).addTo(t)})),t.on("mouseleave",o,(function(){t.getCanvas().style.cursor=""}))}))}function ce(e){return async function(e){let t=await fetch(p+"/police/get-zones/"),a=await t.json();return a.forEach(async t=>{let a=[t.lon,t.lat];var l=new le.a.Popup({offset:25}).setHTML("<strong>Station Head: </strong> :"+t.head+"<br><strong>Mobile: </strong>"+t.mobile+"<br><strong>Zone Name: </strong>"+t.zone_name);document.createElement("div").id="marker",new le.a.Marker({color:"green",rotation:45}).setLngLat(a).setPopup(l).addTo(e)}),a}(e)}le.a.accessToken="Your MapBox Token";class oe extends l.Component{constructor(e){super(e),this.locatePoint=(e,t)=>{ie(e,t)},this.getAlerts=()=>{var e={method:"get",url:p+"/police/get-sos/",data:""};return h()(e).then(e=>{null!=e.data&&this.setState({alerts:e.data})}).catch(e=>{console.log(e),this.setState({alerts:[]})}),[]},this.getStations=()=>{var e={method:"get",url:p+"/police/get-zones/",data:""};return h()(e).then(e=>{null!=e.data&&this.setState({zones:e.data})}).catch(e=>{console.log(e),this.setState({alerts:[]})}),[]},this.flyToPoint=(e,t)=>{console.log([e.lat,e.lon]),t.flyTo({center:[e.lon,e.lat],zoom:12,essential:!0})},this.state={lng:77.5757,lat:12.9991,zoom:13,alerts:[],zones:[]},this.mapContainer=n.a.createRef()}componentDidMount(){const{lng:e,lat:t,zoom:a}=this.state,l=new le.a.Map({container:this.mapContainer.current,style:"mapbox://styles/mapbox/streets-v11",center:[e,t],zoom:a});this.map=l,l.on("move",()=>{this.setState({lng:l.getCenter().lng.toFixed(4),lat:l.getCenter().lat.toFixed(4),zoom:l.getZoom().toFixed(2)})}),l.addControl(new re.a({accessToken:le.a.accessToken,profile:"mapbox/driving"}),"bottom-left"),l.addControl(new le.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0})),function(e,t){e.on("load",(function(){e.addSource("crime",{type:"geojson",data:"https://api.jsonbin.io/b/60a645c6d943f607a50b6253",cluster:!0,clusterMaxZoom:14,clusterRadius:50}),e.addLayer({id:"clusters",type:"circle",source:"crime",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",4,"#fff07d",10,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,4,30,8,40]}}),e.addLayer({id:"cluster-count",type:"symbol",source:"crime",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":16}}),e.addLayer({id:"unclustered-point",type:"circle",source:"crime",filter:["!",["has","point_count"]],paint:{"circle-color":"#d64215","circle-radius":8,"circle-stroke-width":1,"circle-stroke-color":"#fff"}}),e.on("click","clusters",(function(t){var a=e.queryRenderedFeatures(t.point,{layers:["clusters"]}),l=a[0].properties.cluster_id;e.getSource("crime").getClusterExpansionZoom(l,(function(t,l){t||e.easeTo({center:a[0].geometry.coordinates,zoom:l})}))}));var a=new t.Popup;e.on("mouseenter","unclustered-point",(function(t){e.getCanvas().style.cursor="pointer";var l=t.features[0].geometry.coordinates.slice(),n=t.features[0].properties,s="",r=n.year,i=n.month,c=(n.month,n.summary),o=n.state,m=n.location,u=n.city,d=n.attack_type;for(r&&(s+="<strong>Year/Month: </strong> "+r+"/"+i),o&&u&&(s+="<br><strong>City: </strong> "+u+"-"+o),m&&(s+="<br><strong>Location: </strong> "+m),c&&(s+="<br><strong>Summary: <br></strong> "+c),d&&(s+="<br><strong>Attack Type: </strong> "+d);Math.abs(t.lngLat.lng-l[0])>180;)l[0]+=t.lngLat.lng>l[0]?360:-360;a.setLngLat(l).setHTML(s).addTo(e)})),e.on("mouseleave","clusters",(function(){e.getCanvas().style.cursor="",a.remove()}))}))}(l,le.a),this.getStations(),this.getAlerts(),ce(l)}render(){const{user:e}=this.props,{lng:t,lat:a}=this.state;return n.a.createElement(z.a,null,n.a.createElement(D.a,{md:8},n.a.createElement("div",{className:"sidebar"},"Longitude: ",t," | Latitude: ",a),n.a.createElement("div",{ref:this.mapContainer,className:"map-container"})),n.a.createElement(D.a,null,n.a.createElement("div",null,e?n.a.createElement(x.a,{className:"border border-dark bg-dark text-white mx-auto"},n.a.createElement(x.a.Header,{className:"text-center"},n.a.createElement("h5",null," Live Alerts ")," ",n.a.createElement(ne.a,{variant:"danger"},"Emergency")),n.a.createElement(x.a.Body,null,n.a.createElement(Y.a,{className:"border border-dark bg-dark text-white"},this.state.alerts.map(e=>this.locatePoint(e,this.map)),this.state.alerts.map(e=>n.a.createElement(Y.a.Item,{key:e.name+e.mobile,className:"bg-dark text-white"},n.a.createElement(ne.a,{variant:"warning"},n.a.createElement(b.a,{variant:"warning",id:e.name+e.mobile,onClick:()=>this.flyToPoint(e,this.map),size:"sm"},n.a.createElement(k.a,{icon:A.b})))," \xa0\xa0",e.description))))):n.a.createElement(x.a,{className:"border border-dark bg-dark text-white mx-auto"},n.a.createElement(x.a.Header,{className:"text-center"},n.a.createElement("h5",null," Nearest Police Stations ")),n.a.createElement(x.a.Body,null,n.a.createElement(Y.a,{className:"border border-dark bg-dark text-white"},this.state.zones.map(e=>n.a.createElement(Y.a.Item,{key:e.lat+e.lon,className:"bg-dark text-white"},n.a.createElement(ne.a,{variant:"success"},n.a.createElement(b.a,{variant:"success",id:e.lat+e.lon,onClick:()=>this.flyToPoint(e,this.map),size:"sm"},n.a.createElement(k.a,{icon:A.b})))," \xa0\xa0",e.zone_name))))))))}}var me=a(130),ue=a(132);class de extends l.Component{constructor(e){super(e),this.renderColumnNames=e=>e.map((e,t)=>n.a.createElement("span",{key:t,className:"mr-1 text-default"},t+1,": ",e)),this.handleClose=()=>this.setState({show:!1}),this.handleShow=()=>this.setState({show:!0}),this.change=e=>{this.setState({selectedState:e.target.value});const t={state:this.state.selectedState};var a={method:"post",url:p+"/bot/get-stats/",data:t};h()(a).then(e=>{null!=e.data&&this.setState({stats:e.data.stats})}).catch(e=>{console.log(e),this.setState({stats:[]})})},this.renderCsvDataResults=()=>{if(this.state.csvDataObject&&this.state.csvDataObject["State & Year"]){var e=this.state.csvDataObject,t=e["State & Year"];return console.log(e.Stats),n.a.createElement("div",null,n.a.createElement("span",{className:"text-success"},"Rows: ",n.a.createElement("span",{className:"text-primary"},n.a.createElement("b",null,t.rows))),n.a.createElement("br",null),n.a.createElement("span",{className:"text-success"},"Columns: ",n.a.createElement("span",{className:"text-primary"},n.a.createElement("b",null,t.cols))),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement(b.a,{variant:"primary",size:"sm",onClick:this.handleShow},"Visualize"),n.a.createElement("hr",null),n.a.createElement(x.a,null,n.a.createElement(x.a.Header,null,"Grouped Records State & Year wise"),n.a.createElement(x.a.Body,{className:"mb-1",style:{height:"400px",overflowY:"auto",overflow:"-moz-scrollbars-horizontal"}},n.a.createElement(ue.JsonToTable,{json:t.rowData}))),n.a.createElement(y.a,{show:this.state.show,onHide:this.handleClose,dialogClassName:"modal-120w",size:"xl","aria-labelledby":"example-custom-modal-styling-title"},n.a.createElement(y.a.Header,{closeButton:!0},n.a.createElement(y.a.Title,{id:"example-custom-modal-styling-title"},"Visualizations")),n.a.createElement(y.a.Body,null,n.a.createElement("select",{value:this.state.selectedState,onChange:this.change},this.state.states.map(e=>n.a.createElement("option",{key:e,value:e},e))),n.a.createElement("div",{style:{display:"flex",maxWidth:900}},n.a.createElement(me.a,{height:"500px",width:"1110px",chartType:"AreaChart",loader:n.a.createElement("div",null,"Loading Chart"),data:this.state.stats,options:{title:"Grouped By State & Year",hAxis:{title:"Year",titleTextStyle:{color:"#333"}},vAxis:{minValue:0},chartArea:{width:"66%",height:"77%"}}})))))}},this.HelloGetRequestedDetails=()=>{var e={method:"get",url:p+"/police/get-stats/",data:""};h()(e).then(e=>{null!=e.data&&this.setState({csvDataObject:e.data})}).catch(e=>{console.log(e),this.setState({csvDataObject:[]})})},this.loading=()=>n.a.createElement("div",{className:"text-success"},n.a.createElement("strong",null,"Loading...")),this.state={csvDataObject:[],show:!1,states:["a&n islands","andhra pradesh","arunachal pradesh","assam","bihar","chandigarh","chhattisgarh","d&n haveli","daman&diu","delhi ut","goa","gujarat","haryana","himachal pradesh","jammu&kashmir","jharkhand","karnataka","kerala","lakshadweep","madhya pradesh","maharashtra","manipur","meghalaya","mizoram","nagaland","odisha","puducherry","punjab","rajasthan","sikkim","tamil nadu","tripura","uttar pradesh","uttarakhand","west bengal"],selectedState:"andhra pradesh",stats:[]}}componentDidMount(){this.HelloGetRequestedDetails()}render(){return n.a.createElement("div",{className:"animated fadeIn"},n.a.createElement(z.a,null,n.a.createElement(D.a,{md:12},n.a.createElement("h3",null,"Crime Statistics"),n.a.createElement("hr",null),this.state.csvDataObject?this.renderCsvDataResults():this.loading())))}}var he=de;class ge extends l.Component{constructor(...e){super(...e),this.state={},this.handleChange=()=>{try{const e=localStorage.getItem("uid"),t=localStorage.getItem("email");if(e&&t){const a={uid:e,email:t};this.setState({user:a})}}catch(e){console.log(e)}}}componentDidMount(){try{const e=localStorage.getItem("uid"),t=localStorage.getItem("email");if(e&&t){const a={uid:e,email:t};this.setState({user:a})}}catch(e){console.log(e)}}render(){return n.a.createElement("div",null,n.a.createElement(o.a,null,n.a.createElement(m,{user:this.state.user}),n.a.createElement(u.a,null),n.a.createElement(N.a,null,n.a.createElement(z.a,null,n.a.createElement(D.a,{lg:12,style:{marginTop:"30px"}},n.a.createElement(O.d,null,n.a.createElement(O.b,{path:"/",exact:!0,render:e=>n.a.createElement(w,Object.assign({},e,{user:this.state.user,handleChange:this.handleChange}))}),n.a.createElement(O.b,{path:"/dashboard",exact:!0,render:e=>this.state.user?n.a.createElement($,e):n.a.createElement(O.a,{to:"/"})}),n.a.createElement(O.b,{path:"/status",exact:!0,component:te}),n.a.createElement(O.b,{path:"/api",component:()=>(window.location.href="http://localhost:8000/bot",null)}),n.a.createElement(O.b,{path:"/login",exact:!0,render:e=>this.state.user?n.a.createElement(O.a,{to:"/"}):n.a.createElement(Q,e)}),n.a.createElement(O.b,{path:"/dashboard/:id",exact:!0,render:e=>this.state.user?n.a.createElement(ee,e):n.a.createElement(O.a,{to:"/"})}),n.a.createElement(O.b,{path:"/sos",exact:!0,render:e=>n.a.createElement(oe,Object.assign({},e,{user:this.state.user}))}),n.a.createElement(O.b,{path:"/stats",exact:!0,render:e=>n.a.createElement(he,null)}),n.a.createElement(O.a,{to:"/"})))))),n.a.createElement(j,null))}}var Me=ge;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(171);r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[133,1,2]]]);
//# sourceMappingURL=main.3632f599.chunk.js.map